---
slug: /engine/configuration
title: Configuration
---

In this section, we will go over the different type Engine configurations which can be done.

## Backend Wallet

Engine performs blockchain actions using backend wallets that you own and manage.
There are multiple options for securing backend wallets.

### Local wallet

A [local wallet](https://portal.thirdweb.com/wallet/local-wallet) is a wallet created or imported from a private key. Ensure your private key is backed up before transacting with a local wallet in a production environment. By default, Engine uses `LocalWallet`.

> Local wallets private keys are stored encrypted in Engine's database. For security reasons, private keys cannot be exported.

> NOTE: For Production use we suggest to use one of the below KMS Wallet Configuration.

### AWS KMS wallet

Thirdweb Engine supports AWS KMS for signing & sending transactions over any EVM chain. This is a section on how to set up AWS KMS.

#### Steps to set up AWS KMS

1. Create IAM user with programmatic access, see [here](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html#id_users_create_console) for more details.
2. Add create, get, read permission to KMS, see [here](https://docs.aws.amazon.com/kms/latest/developerguide/control-access.html) for more details.

```
Minimum Permissions Required:
---------------------------
kms:CreateKey
kms:GetPublicKey
kms:Sign
kms:CreateAlias
kms:Verify
```

3. Create an AWS KMS key, see [here](https://docs.aws.amazon.com/kms/latest/developerguide/create-keys.html) for more details. or, you can use the `/wallet/create` to create a key.

NOTE:

If you are creating the key yourself on AWS KMS Console, then please select the below config to create a key with sign permission.

```
Key Type: Asymmetric
Key Spec: ECC_SECG_P256K1
Key Usage: Sign and verify
```

Once you create the key above, you can use `/wallet/add` and send details on the end-point to create the wallet

#### Configure Engine for AWS KMS

Follow the below steps:

1. Goto [Engine Dashboad](https://thirdweb.com/dashboard/engine)
2. Add your Engine Instance
3. Goto `Configurations` Tab
4. Now select `AWS KMS` tab
5. Enter the below details

```
- AWS Access Key ID
- AWS Secret Access Key
- AWS Region
```

Now you can Create or Import AWS KMS Wallets using the `/backend-wallet/create` or `/backend-wallet/import` endpoints.

##### For Engine Version below `v0.0.3`, use the below:

Set the below environment variables to use AWS KMS:

```
# Required for AWS Auth
AWS_ACCESS_KEY_ID=<aws_access_key_id>
AWS_SECRET_ACCESS_KEY=<aws_secret_access_key>
AWS_REGION=<aws_region>
```

### Google Cloud KMS wallet

Thirdweb Engine supports Google KMS for signing & sending transactions over any EVM chain. This is a section on how to set up Google KMS for Engine.

#### Steps to set up Google KMS

1. Enable Google KMS API for your Google project, see [here](https://cloud.google.com/kms/docs/create-encryption-keys#before-you-begin) for more details.
2. Create a Service Account (here)[https://cloud.google.com/iam/docs/service-accounts-create]
3. Go to IAM & Admin -> IAM. Select the service account created in step 2 and click `Edit Principal` to add the below roles.

```
Minimum Roles:

Cloud KMS Admin
Cloud KMS CryptoKey Signer/Verifier
```

4. Click on the created Service-Account and go to `Keys` tab.
5. Click `Add Key` -> Create new Key -> select `JSON` & download the JSON file. This JSON file details will be used to authenticate google auth while using Google Cloud KMS.
6. Create a keyring in Google KMS, see [here](https://cloud.google.com/kms/docs/create-key-ring) for more details.

Optional: Create a key in the keyring, see [here](https://cloud.google.com/kms/docs/create-key) for more details. or, you can use the `/wallet/create` to create a key in the keyring.

#### Set up with Google KMS

Follow the below steps:

1. Goto [Engine Dashboad](https://thirdweb.com/dashboard/engine)
2. Add your Engine Instance
3. Goto `Configurations` Tab
4. Now select `GCP KMS` tab
5. Enter the below details

```
- GCP Application Project ID
- GCP KMS Location ID
- GCP KMS Key Ring ID
- GCP Application Credential Emails (from service-account.json file)
- GCP Application Credential Pribate Key (from service-account.json file)
```

Now you can `Create` or Import GCP KMS Wallets using the `/backend-wallet/create` or `/backend-wallet/import` endpoints.

##### For Engine Version below `v0.0.3`, use the below:

Set the below environment variables to use GCP KMS:

```
# Required for Google Auth
GOOGLE_APPLICATION_CREDENTIAL_EMAIL=<client_email_from_download_service_account_json>
GOOGLE_APPLICATION_CREDENTIAL_PRIVATE_KEY=<private_key_from_download_service_account_json>

# Required for Google Cloud KMS
GOOGLE_APPLICATION_PROJECT_ID=<google_project_id>
GOOGLE_KMS_KEY_RING_ID=<key_ring_id>
GOOGLE_KMS_LOCATION_ID=<location_of_key_ring>
```
